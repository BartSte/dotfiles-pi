#!/usr/bin/env bash
set -euo pipefail

usage="main [-h, --help]

Install Clawdbot config files from dotfiles-pi and hydrate secrets from rbw."

if [[ $# -gt 0 ]]; then
  case "$1" in
    -h|--help)
      echo "$usage"; exit 0;;
    *)
      echo "Unknown option: $1"; exit 1;;
  esac
fi

if ! command -v rbw >/dev/null 2>&1; then
  echo "rbw is required but not installed." >&2
  exit 1
fi

DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)

# Use the new sync-to-live script (base + rbw secrets)
"$DIR/sync-to-live"

unset DIR
